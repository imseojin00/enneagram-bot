// server.js
const express = require("express");
const bodyParser = require("body-parser");
const sqlite3 = require("sqlite3").verbose();
const cors = require("cors");
const fs = require("fs");
const csv = require("csv-parser");
const path = require("path");

const app = express();
const PORT = 3000;

app.use(bodyParser.json());
app.use(cors());
app.use(express.static("public"));

// ======================
// ðŸ“Œ DB ì„¤ì •
// ======================
const db = new sqlite3.Database("./enneagram.db");
db.serialize(() => {
  db.run(
    `CREATE TABLE IF NOT EXISTS results (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      userId TEXT,
      name TEXT,
      basic_type TEXT,
      wing TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )`
  );
});

// ======================
// ðŸ“Œ CSV ë¡œë“œ + ì •ê·œí™” ì¸ë±ìŠ¤
// ======================
const rowsIndexed = [];                 // { q11,q12,q21,q3,type, rawRow }
const indexMap = new Map();             // key: "q11-q12-q21-q3" -> rows (array)
let isCSVReady = false;

const csvFilePath = path.join(__dirname, "data", "enneagram_full_combinations.csv");

// ì „ê° ìˆ«ìž â†’ ë°˜ê° ìˆ«ìž
function toAsciiDigits(s) {
  return String(s || "").replace(/[ï¼-ï¼™]/g, (ch) =>
    String.fromCharCode(ch.charCodeAt(0) - 0xFF10 + 0x30)
  );
}
// "1|2|3" ì¤‘ ì²« ê¸€ìžë§Œ ë½‘ê¸°
function normalize13(input) {
  const txt = toAsciiDigits(input).replace(/^\uFEFF/, "").trim();
  const m = txt.match(/[1-3]/);
  return m ? m[0] : "";
}
// Q3ë¥¼ "a-b-c"ë¡œ í‘œì¤€í™”
function normalizeQ3(text) {
  const txt = toAsciiDigits(text).replace(/^\uFEFF/, "").trim();
  if (/^\[.*\]$/.test(txt)) {
    try {
      const arr = JSON.parse(txt.replace(/'/g, '"'));
      const digits = (Array.isArray(arr) ? arr : [])
        .map((v) => toAsciiDigits(v).toString())
        .join(" ");
      const m = digits.match(/[1-9]/g);
      if (m && m.length >= 3) return m.slice(0, 3).join("-");
    } catch (_) {}
  }
  const m = txt.match(/[1-9]/g);
  if (!m || m.length < 3) return "";
  return m.slice(0, 3).join("-");
}
// í‚¤ ìƒì„±
function keyOf(q11, q12, q21, q3) {
  return `${q11}-${q12}-${q21}-${q3}`;
}

// CSV ì½ê¸°
if (!fs.existsSync(csvFilePath)) {
  console.error("âŒ CSV íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤:", csvFilePath);
} else {
  fs.createReadStream(csvFilePath)
    .pipe(csv({ separator: "\t" }))   // ðŸ‘ˆ íƒ­ êµ¬ë¶„ìž ì§€ì •
    .on("data", (row) => {
      const clean = {};
      for (const [k, v] of Object.entries(row)) {
        const key = String(k).replace(/^\uFEFF/, "").trim();
        const val = typeof v === "string" ? v.trim() : v;
        clean[key] = val;
      }

      const q11 = normalize13(clean["Q1-1"]);
      const q12 = normalize13(clean["Q1-2"]);
      const q21 = normalize13(clean["Q2-1"]);
      const q3 = normalizeQ3(clean["Q3_order"]);
      const type = String(clean["Basic_Type"] ?? clean["Result"] ?? "")
        .replace(/^\uFEFF/, "")
        .trim();

      if (q11 && q12 && q21 && q3 && type) {
        const item = { q11, q12, q21, q3, type, rawRow: clean };
        rowsIndexed.push(item);
        const key = keyOf(q11, q12, q21, q3);
        if (!indexMap.has(key)) indexMap.set(key, []);
        indexMap.get(key).push(item);
      }
    })
    .on("end", () => {
      isCSVReady = true;
      console.log(`ì •ê·œí™” ì¸ë±ìŠ¤ âœ… ${rowsIndexed.length} ìœ íš¨í–‰`);

      const sampleQ3s = ["1-2-3", "2-8-3", "9-2-7"];
      for (const s of sampleQ3s) {
        const has = rowsIndexed.some((r) => r.q3 === s);
        console.log(`Q3 "${s}" ì¡´ìž¬?`, has ? "YES" : "NO");
      }

      // ðŸ”Ž íŠ¹ì • ì¡°í•© ê²€ì‚¬ (ì˜ˆ: 3-3-1-2-8-3)
      const testKey = keyOf("3", "3", "1", "2-8-3");
      console.log("ðŸ”Ž ì¡°í•© 3-3-1-2-8-3 ì¡´ìž¬?", indexMap.has(testKey));
    });
}

// ======================
// ðŸ“Œ ë‚ ê°œ ì„¤ëª…(ê°„ë‹¨ ë²„ì „, ì„ íƒìš©)
// ======================
const wingDesc = {
  1: { leftLabel: "1w9", rightLabel: "1w2", left: ["ì°¨ë¶„í•˜ê³  ì˜¨í™”í•˜ë©° ì´ìƒê³¼ ì›ì¹™ì„ ë™ì‹œì— ì¶”êµ¬", "ê°ì •ì„ ê³¼í•˜ê²Œ ë“œëŸ¬ë‚´ì§€ ì•Šê³  ì‹ ì¤‘í•¨", "ê·œì¹™ê³¼ ì¡°í™”ë¥¼ ì¤‘ì‹œ", "ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œë„ ì•ˆì •ê° ìœ ì§€", "ì™„ë²½í•¨ê³¼ í‰í™”ë¥¼ ë™ì‹œì— ì§€í–¥"], right: ["ì›ì¹™ì ì´ë©´ì„œë„ íƒ€ì¸ì„ ë•ê³ ìž í•¨", "ì‚¬íšŒì  ì±…ìž„ê°ê³¼ í—Œì‹ ì´ ê°•í•¨", "ì´ìƒì„ í–‰ë™ìœ¼ë¡œ ì‹¤ì²œ", "íƒ€ì¸ì˜ ê¸°ëŒ€ì™€ ìš”êµ¬ì— ë¯¼ê°", "ê³µë™ì²´ ì†ì—ì„œ ë¦¬ë”ì‹­ ë°œíœ˜"] },
  2: { leftLabel: "2w1", rightLabel: "2w3", left: ["ë„ì›€ì„ ì£¼ëŠ” í–‰ë™ì´ ì›ì¹™/ê¸°ì¤€ì— ì˜í•´ ì¡°ìœ¨", "í—Œì‹ ì ì´ë©° ì±…ìž„ê°ì´ ê°•í•¨", "ê³¼ë„í•œ ìžê¸°í¬ìƒì„ ê²½ê³„", "ë„ë•ì  ê¸°ì¤€ê³¼ ì´ìƒì„ ì§€í‚´", "ì‚¬íšŒì  ì¡°í™”ë¥¼ ì¤‘ì‹œ"], right: ["ì¸ì •ë°›ê³  ì‹¶ì–´í•˜ë©° ì‚¬êµì ", "ê´€ê³„ë¥¼ ì¦ê¸°ê³  ìžê¸°í‘œí˜„ í™œë°œ", "ì„±ì·¨ì™€ ë§¤ë ¥ ë°œíœ˜ì— ê´€ì‹¬", "ì¸ì •Â·ì„±ì·¨ë¡œ ì¡´ìž¬ê° í™•ì¸", "ê´€ê³„ ì† ì˜í–¥ë ¥ í–‰ì‚¬"] },
  3: { leftLabel: "3w2", rightLabel: "3w4", left: ["ì‚¬êµì Â·í˜‘ë ¥ì ì´ë©° ì„±ì·¨ë¥¼ ì¶”êµ¬", "ì¹­ì°¬/ì¸ì •ì— ë¯¼ê°", "ë§¤ë ¥ê³¼ ì—­ëŸ‰ì„ í™œìš©í•´ ëª©í‘œ ë‹¬ì„±", "íƒ€ì¸ì˜ ê¸°ëŒ€ë¥¼ ë°˜ì˜í•˜ë©° ì ê·¹ì ", "ê´€ê³„ì™€ ì„±ì·¨ì˜ ê²°í•©"], right: ["ì„±ì·¨ì™€ ìžê¸°í‘œí˜„ì˜ ê²°í•©", "ê°ì •ì˜ ê¹Šì´ë¥¼ ëª©í‘œì— ë…¹ìž„", "ë…ì°½ì„±ì„ ë³´ì—¬ì£¼ë ¤ ë…¸ë ¥", "ì„±ê³µê³¼ ì •ì²´ì„±ì˜ ì—°ê²°ì„ ì¤‘ì‹œ", "ìžê¸°ë§Œì˜ ìŠ¤íƒ€ì¼ ì¤‘ì‹œ"] },
  4: { leftLabel: "4w3", rightLabel: "4w5", left: ["ê°ì •ì„ ì†”ì§ížˆ í‘œí˜„í•˜ë©° ëª©í‘œì§€í–¥", "ê°œì„±ì„ ì‚¬íšŒì  ë§¥ë½ì—ì„œ ë“œëŸ¬ëƒ„", "ë…ì°½ì„±ìœ¼ë¡œ ì£¼ëª©ë°›ê³  ì‹¶ìŒ", "ê°ì • ëª°ìž…ê³¼ ì„±ì·¨ìš•êµ¬ ê³µì¡´", "ê´€ê³„ ì†ì—ì„œ ë§¤ë ¥ ë°œíœ˜"], right: ["ë‚´ë©´ì— ëª°ìž…, ì‚¬ìƒ‰ì Â·ë…ì°½ì ", "ê°ì •ì„ ì„¬ì„¸í•˜ê²Œ ë¶„ì„/í‘œí˜„", "ìžê¸°ì´í•´ì™€ íƒêµ¬ë¥¼ ì¤‘ì‹œ", "ì„±ì°°/ì°½ìž‘ì— ì§‘ì¤‘", "ê°ì •ê³¼ ì‚¬ê³ ì˜ ì¡°í™”"] },
  5: { leftLabel: "5w4", rightLabel: "5w6", left: ["ê¹Šì´ ìžˆëŠ” ì‚¬ê³  + ì°½ì˜ì„±", "ê°ì • ëª°ìž…ê³¼ ì§€ì  íƒêµ¬ ê³µì¡´", "ë…ë¦½ì ì´ê³  ìžìœ¨ì ", "ë³µìž¡í•œ ë¬¸ì œë¥¼ ë¶„ì„/íƒêµ¬", "ì§€ì Â·ì˜ˆìˆ ì  ê´€ì‹¬ì„ ë™ì‹œì— ê°€ì§"], right: ["ë¶„ì„ì ì´ê³  ì‹ ì¤‘, ê³„íšì ", "í˜„ì‹¤ì  ë¬¸ì œ í•´ê²°ë ¥", "ë¶ˆí™•ì‹¤ì„±ì— ëŒ€ë¹„ì±… ë§ˆë ¨", "ì •ë³´ ìŠµë“ê³¼ ì•ˆì „ë§ ì¤‘ì‹œ", "ë…¼ë¦¬ì™€ ì•ˆì •ì˜ ê· í˜•"] },
  6: { leftLabel: "6w5", rightLabel: "6w7", left: ["ì‹ ì¤‘í•˜ê³  ë¶„ì„ì , ì „ëžµì  ì‚¬ê³ ", "ë¶ˆí™•ì‹¤ì„±ì— ëŒ€ë¹„/ê³„íš ì¤‘ì‹œ", "ì•ˆì „/ì‹ ë¢°ì— ë¯¼ê°", "ì§€ì‹ê³¼ ì •ë³´ë¡œ íŒë‹¨", "ì¡°ì§ì Â·ë…¼ë¦¬ì  ì ‘ê·¼"], right: ["ì™¸í–¥ì /í™œë™ì ì´ë©° ì—°ê²°ì„ ì›í•¨", "ì‚¬íšŒì  ê´€ê³„ ì† ì•ˆì •/ì¦ê±°ì›€", "ì‹ ë¢°í•  ì§‘ë‹¨ì—ì„œ ì—ë„ˆì§€ ë°œíœ˜", "ê³„íšì ì´ì§€ë§Œ ëª¨í—˜ì„±ë„ ìžˆìŒ", "í˜‘ë ¥í•˜ë©° ë¬¸ì œ í•´ê²°"] },
  7: { leftLabel: "7w6", rightLabel: "7w8", left: ["ì™¸í–¥ì /ì‚¬êµì , ì—°ê²°ì„ ì¦ê¹€", "ì¦ê±°ì›€/ê²½í—˜ ì¶”êµ¬, í™œë™ì ", "ì‹ ë¢°/í˜‘ë ¥ ì† ëª¨í—˜ì„ ê³„íš", "í˜¸ê¸°ì‹¬ ë§Žê³  ê°€ëŠ¥ì„± íƒìƒ‰", "í•¨ê»˜ ì¦ê±°ì›€ì„ ë‚˜ëˆ”"], right: ["ê°•í•œ ì¶”ì§„ë ¥ê³¼ ê²°ë‹¨ë ¥", "ëª¨í—˜ì /ë„ì „ì , ì™¸í–¥ì„± ê°•ì¡°", "ì£¼ë„ì ì´ê³  ìžì‹ ê° ë„˜ì¹¨", "í•´ê²°ì±…ì„ ë¹ ë¥´ê²Œ íƒìƒ‰", "ì—ë„ˆì§€ì™€ ì˜í–¥ë ¥ìœ¼ë¡œ ë¦¬ë”ì‹­"] },
  8: { leftLabel: "8w7", rightLabel: "8w9", left: ["ê°•ì¸í•œ ì˜ì§€ + ì™¸í–¥ì  ì—ë„ˆì§€", "ì£¼ë„ì /ëª¨í—˜ì /ê²°ë‹¨ë ¥ ê°•í•¨", "í–‰ë™ìœ¼ë¡œ ë¬¸ì œ í•´ê²°", "ë„ì „ì„ ì¦ê¹€", "ë¦¬ë”ì‹­ê³¼ ì¶”ì§„ë ¥"], right: ["ê°•ì¸í•¨ + ì˜¨í™”í•¨", "ê¶Œìœ„ì ì´ì§€ë§Œ ì¡°í™” ì¤‘ì‹œ", "ê²°ë‹¨ë ¥ + í˜‘ë ¥", "ì£¼ë³€ ë³´í˜¸/ì§€í‚´", "ë‚´ì  ê°•ì¸í•¨ê³¼ ì˜¨í™”í•¨ì˜ ê· í˜•"] },
  9: { leftLabel: "9w8", rightLabel: "9w1", left: ["í‰í™”ë¡œìš°ë‚˜ ê²°ë‹¨ë ¥/ì˜ì§€ë„ ê²°í•©", "ê°ˆë“±ì„ í”¼í•˜ë©´ì„œ ë³´í˜¸ì ", "ì¡°í™” ìœ ì§€, ì•ˆì •ê°ê³¼ íž˜ ì¶”êµ¬", "ë‚´ì  í‰í™” + ì™¸ì  ê°•ì¸í•¨ ê³µì¡´", "ì£¼ë³€ì„ ì•ˆì •ì‹œí‚¤ëŠ” ì—­í• "], right: ["ì˜¨í™”í•¨ + ì›ì¹™ì  ì„±í–¥", "ì¡°í™”ë¥¼ ìœ ì§€í•˜ê³  ê°ˆë“±ì„ ì¡°ì‹¬", "ìžê¸° ê·œìœ¨ê³¼ ë‚´ì  ì•ˆì •", "í‰í™”ë¡œìš´ ê´€ê³„ ìœ ì§€", "ì´ìƒê³¼ í˜„ì‹¤ì˜ ê· í˜•"] },
};

// ======================
// ðŸ“Œ ìƒì„¸ ê²°ê³¼(ë„¤ê°€ ì¤€ ë¬¸êµ¬ ê·¸ëŒ€ë¡œ)
// ======================
const wingLongDesc = {
  "1w2": `ðŸŸ¢ 1ë²ˆ ìœ í˜• (ê°œí˜ê°€)
1w2 (ê°œí˜ê°€ + ì¡°ë ¥ê°€)

ì›ì¹™ì ì´ê³  ì´ìƒì£¼ì˜ì ì¸ ì„±í–¥ì— ë”°ëœ»í•œ ì¸ê°„ê´€ê³„ ì§€í–¥ì´ ë”í•´ì§„ ëª¨ìŠµì´ë‹¤.
ì •ì˜ê°ê³¼ ë„ë•ì„±ì„ ë°”íƒ•ìœ¼ë¡œ ì‚¬íšŒì  ë¬¸ì œë‚˜ ê³µë™ì²´ì˜ í•„ìš”ì— ì ê·¹ì ìœ¼ë¡œ ì°¸ì—¬í•œë‹¤.
ì‚¬ëžŒë“¤ì„ ë•ëŠ” ê³¼ì •ì—ì„œ ë³´ëžŒê³¼ ì •ì²´ì„±ì„ ëŠë¼ë©°, ì±…ìž„ê°ì´ ê°•í•˜ë‹¤.
ì‹¤ì²œì ì´ê³  ì ê·¹ì ì´ë©°, ìžê¸° ê¸°ì¤€ì„ íƒ€ì¸ì—ê²Œ ì ìš©í•˜ë ¤ëŠ” ê²½í–¥ì´ ìžˆë‹¤.
ë¹„íŒì ì¼ ìˆ˜ ìžˆìœ¼ë‚˜, ê·¸ ì˜ë„ëŠ” íƒ€ì¸ì„ ë” ë‚˜ì€ ë°©í–¥ìœ¼ë¡œ ì´ëŒê³ ìž í•¨ì´ë‹¤.
í—Œì‹ ê³¼ ì´ìƒì£¼ì˜ê°€ ê²°í•©ë˜ì–´ â€˜ë´‰ì‚¬í•˜ëŠ” ê°œí˜ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ë•Œë¡œëŠ” ìžê¸° í¬ìƒì´ ì§€ë‚˜ì¹˜ê±°ë‚˜ êµì •í•˜ë ¤ëŠ” íƒœë„ë¡œ ë¹„ì¹  ìˆ˜ ìžˆë‹¤.
ê·¸ëŸ¬ë‚˜ ê³µë™ì„ ì„ ìœ„í•œ ì—´ì •ê³¼ ë”°ëœ»í•œ ì±…ìž„ê°ì´ íŠ¹ì§•ì´ë‹¤.
íƒ€ì¸ì˜ ì„±ìž¥ê³¼ ì‚¬íšŒì  ë³€í™”ë¥¼ ë™ì‹œì— ì¶”êµ¬í•˜ëŠ” ìœ í˜•ì´ë‹¤.`,

  "1w9": `ðŸŸ¢ 1ë²ˆ ìœ í˜• (ê°œí˜ê°€)
1w9 (ê°œí˜ê°€ + í‰í™”ì£¼ì˜ìž)

ì›ì¹™ì ì´ê³  ì´ìƒì£¼ì˜ì ì¸ ì„±í–¥ì— ì°¨ë¶„í•˜ê³  í‰í™”ë¡œìš´ ê¸°ì§ˆì´ ë”í•´ì§„ ëª¨ìŠµì´ë‹¤.
ë„ë•ì  ê¸°ì¤€ì„ ì¤‘ì‹œí•˜ë©´ì„œë„, ê°ˆë“±ë³´ë‹¤ëŠ” ì¡°í™”ì™€ í‰í™”ë¥¼ ì¶”êµ¬í•œë‹¤.
ì™¸ë¶€ì ìœ¼ë¡œ ê°•í•˜ê²Œ ë‚˜ì„œê¸°ë³´ë‹¤ëŠ” ì°¨ë¶„í•˜ê³  ì‹ ì¤‘í•˜ê²Œ ì˜ê²¬ì„ ì œì‹œí•œë‹¤.
ì¹¨ì°©í•˜ê³  ì•ˆì •ì ì¸ íƒœë„ë¡œ ì£¼ë³€ì— ì‹ ë¢°ê°ì„ ì¤€ë‹¤.
ë‚´ì  í‰í™”ì™€ ìžê¸° ìˆ˜ì–‘ì„ ì¤‘ì‹œí•˜ë©°, ì¢…ì¢… ì² í•™ì Â·ì‚¬ìƒ‰ì ì´ë‹¤.
ì´ìƒì£¼ì˜ê°€ ì§€ë‚˜ì³ í˜„ì‹¤ê³¼ ê´´ë¦¬ë¥¼ ê²ªê¸°ë„ í•œë‹¤.
ë¶„ë…¸ë¥¼ ì§ì ‘ ë“œëŸ¬ë‚´ê¸°ë³´ë‹¤ ì–µì œí•˜ê³  í‰í™”ë¡œì›€ì„ ìœ ì§€í•˜ë ¤ í•œë‹¤.
â€˜ì°¨ë¶„í•œ ê°œí˜ê°€â€™, â€˜í‰í™”ë¡œìš´ ì›ì¹™ì£¼ì˜ìžâ€™ë¡œ ë¶ˆë¦´ ìˆ˜ ìžˆë‹¤.
ì •ì˜ê°ê³¼ ì˜¨í™”í•¨ì„ í•¨ê»˜ í’ˆê³  ì‚´ì•„ê°€ëŠ” ìœ í˜•ì´ë‹¤.`,

  "2w1": `ðŸŸ¢ 2ë²ˆ ìœ í˜• (ì¡°ë ¥ê°€)
2w1 (ì¡°ë ¥ê°€ + ê°œí˜ê°€)

ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ ë§Žì€ ì¡°ë ¥ ì„±í–¥ì— ì›ì¹™ì ì´ê³  ì±…ìž„ê° ìžˆëŠ” ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
íƒ€ì¸ì„ ë•ê³  ì‹¶ì–´ í•˜ë©´ì„œë„ ë„ë•ì Â·ìœ¤ë¦¬ì  ê¸°ì¤€ì— ì¶©ì‹¤í•˜ë‹¤.
ì‚¬ëžŒë“¤ì—ê²Œ í—Œì‹ ì ì´ë©´ì„œë„, ìžì‹ ì˜ ë„ì›€ì„ ì˜¬ë°”ë¥¸ ë°©ì‹ìœ¼ë¡œ ì£¼ê³ ìž í•œë‹¤.
ê²¸ì†í•˜ë©´ì„œë„ ê°•í•œ ì±…ìž„ê°ì„ ë³´ì—¬ ê³µë™ì²´ì— í¬ê²Œ ê¸°ì—¬í•œë‹¤.
ìžê¸°í¬ìƒì ì¼ ìˆ˜ ìžˆìœ¼ë‚˜, ë™ì‹œì— ì˜¬ë°”ë¦„ì„ ì§€í–¥í•œë‹¤.
íƒ€ì¸ì˜ ì„±ìž¥ì„ ë•ê³ , ì •ì˜ë¡œìš´ ì§ˆì„œë¥¼ ìœ ì§€í•˜ë ¤ í•œë‹¤.
ë•Œë¡œëŠ” ì§€ë‚˜ì¹˜ê²Œ ìžì‹ ì„ ì–µì œí•˜ê±°ë‚˜ ì—„ê²©í•´ì§ˆ ìˆ˜ ìžˆë‹¤.
â€˜í—Œì‹ ì ì¸ ë„ë•ê°€â€™ë¡œ ë¶ˆë¦¬ë©° ì•ˆì •ê°ì„ ì¤€ë‹¤.
ë”°ëœ»í•¨ê³¼ ì›ì¹™ ì‚¬ì´ì˜ ê· í˜•ì„ ì´ë£¨ë ¤ëŠ” ìœ í˜•ì´ë‹¤.`,

  "2w3": `ðŸŸ¢ 2ë²ˆ ìœ í˜• (ì¡°ë ¥ê°€)
2w3 (ì¡°ë ¥ê°€ + ì„±ì·¨ê°€)

ìœ í˜•ì€ ë”°ëœ»í•œ ì¡°ë ¥ ì„±í–¥ì— ì„±ì·¨ìš•ê³¼ ì‚¬íšŒì  ë§¤ë ¥ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
íƒ€ì¸ì„ ë•ëŠ” ê²ƒì—ì„œ ê¸°ì¨ì„ ëŠë¼ì§€ë§Œ, ë™ì‹œì— ì¸ì •ë°›ê³  ì‹¶ì–´ í•œë‹¤.
ë§¤ë ¥ì ì´ê³  ì‚¬êµì ì´ë©°, í™œë°œí•œ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ ë‚˜ê°„ë‹¤.
ì‚¬ëžŒë“¤ì—ê²Œ ì¹œê·¼í•˜ë©´ì„œë„ ì„±ê³¼ ì§€í–¥ì ì¸ íƒœë„ë¥¼ ë³´ì¸ë‹¤.
ë‹¤ë¥¸ ì‚¬ëžŒì˜ ìš•êµ¬ë¥¼ ë¯¼ê°í•˜ê²Œ íŒŒì•…í•˜ê³  ì ê·¹ì ìœ¼ë¡œ ì§€ì›í•œë‹¤.
ë•Œë¡œëŠ” ì¸ì • ìš•êµ¬ ë•Œë¬¸ì— ì§€ë‚˜ì¹˜ê²Œ ê³¼ìž¥ë˜ê±°ë‚˜ í”¼ìƒì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ë§¤ë ¥ì ì¸ ì¡°ë ¥ìžâ€™ë¡œ ë¶ˆë¦¬ë©° ì‚¬íšŒì  ì˜í–¥ë ¥ì´ í¬ë‹¤.
ë•ëŠ” í–‰ë™ì´ ê°œì¸ì  ì„±ê³µê³¼ë„ ì—°ê²°ëœë‹¤.
ë”°ëœ»í•¨ê³¼ ì„±ì·¨ìš•ì„ ë™ì‹œì— ì¶”êµ¬í•˜ëŠ” ìœ í˜•ì´ë‹¤.`,

  "3w2": `ðŸŸ¢ 3ë²ˆ ìœ í˜• (ì„±ì·¨ê°€)
3w2 (ì„±ì·¨ê°€ + ì¡°ë ¥ê°€)

ìœ í˜•ì€ ì„±ì·¨ìš•ê³¼ ëª©í‘œ ì§€í–¥ì  ì„±í–¥ì— ì‚¬êµì„±ê³¼ ë”°ëœ»í•¨ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ë‹¤ë¥¸ ì‚¬ëžŒì—ê²Œ í˜¸ê°ì„ ì£¼ë©´ì„œë„ ë›°ì–´ë‚œ ì„±ê³¼ë¥¼ ì¶”êµ¬í•œë‹¤.
ë¦¬ë”ì‹­ì´ ê°•í•˜ë©°, ì‚¬ëžŒë“¤ì„ ì´ë„ëŠ” ëŠ¥ë ¥ì´ ìžˆë‹¤.
ì¸ì •ë°›ëŠ” ë° ë¯¼ê°í•˜ê³ , ì‚¬íšŒì ìœ¼ë¡œ ì„±ê³µí•˜ëŠ” ê²ƒì„ ì¤‘ì‹œí•œë‹¤.
ì¹´ë¦¬ìŠ¤ë§ˆì™€ ë§¤ë ¥ìœ¼ë¡œ ëŒ€ì¸ê´€ê³„ì—ì„œ ìœ ë¦¬í•˜ë‹¤.
ë•Œë¡œëŠ” ì´ë¯¸ì§€ ê´€ë¦¬ì— ì¹˜ì¤‘í•˜ì—¬ ì§„ì •ì„±ì´ ë¶€ì¡±í•´ ë³´ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ë§¤ë ¥ì ì¸ ì„±ì·¨ê°€â€™ë¡œ ë¶ˆë¦¬ë©° ì‚¬ëžŒë“¤ì„ ëŒì–´ë‹¹ê¸´ë‹¤.
ì„±ê³¼ì™€ ê´€ê³„ë¥¼ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì™¸í–¥ì ì´ê³  ìžì‹ ê° ë„˜ì¹˜ëŠ” ìœ í˜•ì´ë‹¤.`,

  "3w4": `ðŸŸ¢ 3ë²ˆ ìœ í˜• (ì„±ì·¨ê°€)
3w4 (ì„±ì·¨ê°€ + ê°œì¸ì£¼ì˜ìž)

ìœ í˜•ì€ ì„±ì·¨ìš•ê³¼ ëª©í‘œ ì§€í–¥ì  ì„±í–¥ì— ê°œì„±ê³¼ ì°½ì˜ì„±ì´ ë”í•´ì§„ ëª¨ìŠµì´ë‹¤.
ìžì‹ ì˜ ë…ì°½ì„±ì„ ì„±ê³¼ë¡œ ì—°ê²°í•˜ë ¤ í•œë‹¤.
ë³´ë‹¤ ì§„ì§€í•˜ê³  ë‚´ë©´ì ì¸ ì„±ì°°ì„ ì¤‘ì‹œí•œë‹¤.
ìžì‹ ì˜ íŠ¹ë³„í•¨ì„ ì¸ì •ë°›ê³  ì‹¶ì–´ í•˜ë©°, ê°œì„±ì ì¸ ì„±ì·¨ë¥¼ ì¶”êµ¬í•œë‹¤.
ì‚¬ëžŒë“¤ ì•žì—ì„œëŠ” ì„±ê³µì ì¸ ì´ë¯¸ì§€ë¥¼ ë³´ì´ë˜, ë‚´ë©´ì ìœ¼ë¡œëŠ” ê¹Šì´ ìžˆëŠ” ìžê¸°í‘œí˜„ì„ ì›í•œë‹¤.
ë•Œë¡œëŠ” ê°ì • ê¸°ë³µì´ ì‹¬í•˜ê±°ë‚˜ ì™„ë²½ì£¼ì˜ì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ì°½ì˜ì ì¸ ì„±ì·¨ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ì„±ê³¼ì™€ ìžê¸° ì •ì²´ì„±ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì™¸í–¥ì„±ê³¼ ë‚´í–¥ì„±ì´ ê· í˜•ì„ ì´ë£¨ëŠ” ìœ í˜•ì´ë‹¤.`,

  "4w3": `ðŸŸ¢ 4ë²ˆ ìœ í˜• (ê°œì¸ì£¼ì˜ìž)
4w3 (ê°œì¸ì£¼ì˜ìž + ì„±ì·¨ê°€)

ìœ í˜•ì€ ê°ìˆ˜ì„±ê³¼ ì°½ì˜ì„±ì— ì™¸í–¥ì„±ê³¼ ì„±ì·¨ìš•ì´ ë”í•´ì§„ ëª¨ìŠµì´ë‹¤.
ìžì‹ ì˜ ë…ì°½ì„±ì„ í‘œí˜„í•˜ê³ , ì˜ˆìˆ ì Â·ì°½ì¡°ì  ì„±ì·¨ë¥¼ ì¶”êµ¬í•œë‹¤.
ì‚¬ëžŒë“¤ ì•žì—ì„œ ë§¤ë ¥ì ì´ê³  í‘œí˜„ë ¥ì´ í’ë¶€í•˜ë‹¤.
ìžê¸° ê°œì„±ì„ ì¸ì •ë°›ì„ ë•Œ ê°€ìž¥ ë§Œì¡±í•œë‹¤.
ë•Œë¡œëŠ” ê³¼ì‹œì ì´ê±°ë‚˜ ê·¹ì ì¼ ìˆ˜ ìžˆë‹¤.
ì˜ˆìˆ ì  ìž¬ëŠ¥ê³¼ ì‚¬íšŒì  ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ë™ì‹œì— ì§€ë‹Œë‹¤.
â€˜ê·¹ì ì¸ ì˜ˆìˆ ê°€â€™ë¡œ ë¶ˆë¦¬ê¸°ë„ í•œë‹¤.
ìžì‹ ì˜ ë‚´ë©´ê³¼ ì™¸ë¶€ ì„±ê³¼ë¥¼ í•¨ê»˜ ì¶”êµ¬í•œë‹¤.
í‘œí˜„ë ¥ê³¼ ì°½ì˜ì„±ì´ ê°•í•œ ìœ í˜•ì´ë‹¤.`,

  "4w5": `ðŸŸ¢ 4ë²ˆ ìœ í˜• (ê°œì¸ì£¼ì˜ìž)
4w5 (ê°œì¸ì£¼ì˜ìž + íƒêµ¬ê°€)

ê°ìˆ˜ì„±ê³¼ ì°½ì˜ì„±ì— ì‚¬ìƒ‰ì ì´ê³  íƒêµ¬ì ì¸ ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ë‚´í–¥ì ì´ê³  ì² í•™ì ì´ë©°, ê¹Šì€ ë‚´ë©´ì„¸ê³„ë¥¼ íƒêµ¬í•œë‹¤.
ì˜ˆìˆ ì  ìž¬ëŠ¥ê³¼ ì§€ì  í˜¸ê¸°ì‹¬ì„ í•¨ê»˜ ì§€ë‹Œë‹¤.
ìžì‹ ì˜ ë…íŠ¹í•¨ì„ ì§€ì‹ê³¼ ì‚¬ìœ ë¥¼ í†µí•´ í‘œí˜„í•œë‹¤.
ë•Œë¡œëŠ” ê³ ë…í•˜ê±°ë‚˜ í˜„ì‹¤ì—ì„œ ë²—ì–´ë‚œ íƒœë„ë¥¼ ë³´ì´ê¸°ë„ í•œë‹¤.
â€˜ì‚¬ìƒ‰ì ì¸ ì˜ˆìˆ ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
í’ë¶€í•œ ê°ì„±ê³¼ ê¹Ší•œ ì‚¬ê³ ë¥¼ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ê°œì„±ì ì´ë©´ì„œë„ ì² ì €ížˆ ìžê¸° ë‚´ë©´ ì¤‘ì‹¬ì ì´ë‹¤.
ì§€ì  íƒêµ¬ì™€ ì˜ˆìˆ ì  í‘œí˜„ì´ ì–´ìš°ëŸ¬ì§€ëŠ” ìœ í˜•ì´ë‹¤.`,

  "5w4": `ðŸŸ¢ 5ë²ˆ ìœ í˜• (íƒêµ¬ê°€)
5w4 (íƒêµ¬ê°€ + ê°œì¸ì£¼ì˜ìž)
ì§€ì  íƒêµ¬ì‹¬ê³¼ ë…ì°½ì  ê°ìˆ˜ì„±ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ë‚´í–¥ì ì´ê³  ì˜ˆìˆ ì ì´ë©°, ë…ë¦½ì ì¸ ì‚¬ê³ ë¥¼ ì¤‘ì‹œí•œë‹¤.
ê¹Šì€ ì´í•´ì™€ í†µì°°ì„ ì§€í–¥í•œë‹¤.
í•™ë¬¸ê³¼ ì˜ˆìˆ , ì² í•™ì„ ì•„ìš°ë¥´ëŠ” ê´€ì‹¬ì„ ê°€ì§ˆ ìˆ˜ ìžˆë‹¤.
ë•Œë¡œëŠ” ê³ ë¦½ë˜ê±°ë‚˜ í˜„ì‹¤ê³¼ ê±°ë¦¬ê°ì„ ë‘˜ ìˆ˜ ìžˆë‹¤.
â€˜ì² í•™ì ì¸ íƒêµ¬ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ì°½ì˜ì„±ê³¼ ë¶„ì„ë ¥ì´ í•¨ê»˜ ë°œíœ˜ëœë‹¤.
ì‚¬ìœ ì™€ ìžê¸° í‘œí˜„ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ê¹Šì€ ë‚´ì  ì„¸ê³„ë¥¼ íƒêµ¬í•˜ëŠ” ìœ í˜•ì´ë‹¤.`,

  "5w6": `ðŸŸ¢ 5ë²ˆ ìœ í˜• (íƒêµ¬ê°€)
5w6 (íƒêµ¬ê°€ + ì¶©ì‹¤ê°€)

ì§€ì  íƒêµ¬ì‹¬ê³¼ ì•ˆì „ ì¶”êµ¬ì  ì„±í–¥ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì´ë©°, ì‹ ë¢°í•  ë§Œí•œ ì‚¬ëžŒì„ ì°¾ëŠ”ë‹¤.
ë¶ˆì•ˆì •í•œ ìƒí™©ì„ í”¼í•˜ê³  í™•ì‹¤í•œ ì§€ì‹ì„ ì¶”êµ¬í•œë‹¤.
ì‹¤ìš©ì ì´ê³  ì²´ê³„ì ì¸ ì‚¬ê³ ë¥¼ í•œë‹¤.
ë•Œë¡œëŠ” ì˜ì‹¬ì´ ë§Žê±°ë‚˜ ì§€ë‚˜ì¹˜ê²Œ ì‹ ì¤‘í•  ìˆ˜ ìžˆë‹¤.
â€˜ì‹¤ìš©ì ì¸ íƒêµ¬ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ì•ˆì •ì„±ê³¼ ì§€ì‹ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
í˜‘ë ¥ì ì´ë©´ì„œë„ ë¶„ì„ì ì¸ íƒœë„ë¥¼ ë³´ì¸ë‹¤.
í˜„ì‹¤ì ì´ê³  ì‹ ë¢°ì„± ìžˆëŠ” ìœ í˜•ì´ë‹¤.`,

  "6w5": `ðŸŸ¢ 6ë²ˆ ìœ í˜• (ì¶©ì‹¤ê°€)
6w5 (ì¶©ì‹¤ê°€ + íƒêµ¬ê°€)

ì¶©ì‹¤ì„±ê³¼ ì‹ ë¢°ë¥¼ ì¤‘ì‹œí•˜ë©´ì„œ ë¶„ì„ì ì´ê³  ì‹ ì¤‘í•œ ê¸°ì§ˆì„ ë³´ì¸ë‹¤.
ë¶ˆí™•ì‹¤í•œ ìƒí™©ì„ ëŒ€ë¹„í•˜ê³ , ì•ˆì „ì„ ìœ„í•´ ì •ë³´ë¥¼ ìˆ˜ì§‘í•œë‹¤.
ì‹ ë¢°í•  ë§Œí•œ ê´€ê³„ì™€ ì²´ê³„ë¥¼ ì°¾ëŠ”ë‹¤.
ë•Œë¡œëŠ” ë°©ì–´ì ì´ê±°ë‚˜ ì˜ì‹¬ì´ ë§Žì„ ìˆ˜ ìžˆë‹¤.
â€˜ë¶„ì„ì ì¸ ì¶©ì‹¤ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ì‚¬ë ¤ ê¹Šê³  ì¡°ì‹¬ìŠ¤ëŸ½ë‹¤.
í˜‘ë ¥ê³¼ ì•ˆì •ì„±ì„ ì¶”êµ¬í•œë‹¤.
ìžì‹ ê³¼ íƒ€ì¸ì˜ ì•ˆì „ì„ ì§€í‚¤ë ¤ëŠ” íƒœë„ê°€ ê°•í•˜ë‹¤.
ì±…ìž„ê° ìžˆëŠ” í˜„ì‹¤ì£¼ì˜ì  ìœ í˜•ì´ë‹¤.`,

  "6w7": `ðŸŸ¢ 6ë²ˆ ìœ í˜• (ì¶©ì‹¤ê°€)
6w7 (ì¶©ì‹¤ê°€ + ì—´ì •ê°€)

ì¶©ì‹¤ì„±ê³¼ ì‹ ë¢° ì„±í–¥ì— ì‚¬êµì ì´ê³  í™œë™ì ì¸ ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ì‚¬ëžŒë“¤ê³¼ í•¨ê»˜í•  ë•Œ ì•ˆì „ê°ì„ ëŠë‚€ë‹¤.
ë‚™ê´€ì ì´ê³  í™œë°œí•˜ë©°, ìƒˆë¡œìš´ í™œë™ì— ì°¸ì—¬í•œë‹¤.
ë¶ˆì•ˆí•  ë•ŒëŠ” ì‚¬ëžŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ í†µí•´ ìœ„ì•ˆì„ ì–»ëŠ”ë‹¤.
ë•Œë¡œëŠ” ì¶©ë™ì ì´ê±°ë‚˜ ì˜ì¡´ì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ì‚¬êµì ì¸ ì¶©ì‹¤ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
í˜‘ë ¥ê³¼ ëª¨í—˜ì‹¬ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ëŒ€ì¸ê´€ê³„ì™€ ê³µë™ì²´ ì¤‘ì‹¬ì ì´ë‹¤.
ë°ê³  í™œë™ì ì¸ í˜„ì‹¤ì£¼ì˜ìžë‹¤.`,

  "7w6": `ðŸŸ¢ 7ë²ˆ ìœ í˜• (ì—´ì •ê°€)
7w6 (ì—´ì •ê°€ + ì¶©ì‹¤ê°€)

ëª¨í—˜ì‹¬ê³¼ ë‚™ê´€ì£¼ì˜ì— ì¶©ì‹¤ì„±ê³¼ ì‚¬íšŒì„±ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ì‚¬ëžŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” í™œë™ì—ì„œ ì¦ê±°ì›€ì„ ì°¾ëŠ”ë‹¤.
ì•ˆì •ê³¼ ì•ˆì „ì„ í™•ë³´í•˜ë©´ì„œë„ ë‹¤ì–‘í•œ ê²½í—˜ì„ ì¦ê¸´ë‹¤.
ë‚™ê´€ì ì´ì§€ë§Œ ë™ì‹œì— ì‹ ë¢°í•  ìˆ˜ ìžˆëŠ” ì‚¬ëžŒì„ ì°¾ëŠ”ë‹¤.
ë•Œë¡œëŠ” ì‚°ë§Œí•˜ê±°ë‚˜ ì§€ë‚˜ì¹˜ê²Œ ì˜ì¡´ì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜í˜‘ë ¥ì ì¸ ëª¨í—˜ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ìž¬ë¯¸ì™€ ì•ˆì „ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì‚¬íšŒì ì´ê³  í™œë°œí•œ ìœ í˜•ì´ë‹¤.
ë°ê³  ì¹œê·¼í•œ ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.`,

  "7w8": `ðŸŸ¢ 7ë²ˆ ìœ í˜• (ì—´ì •ê°€)
7w8 (ì—´ì •ê°€ + ë„ì „ìž)

ëª¨í—˜ì‹¬ê³¼ ë‚™ê´€ì£¼ì˜ì— ê°•ì¸í•¨ê³¼ ìžê¸°ì£¼ìž¥ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ìžìœ ë¡­ê³  ë…ë¦½ì ì¸ ê¸°ì§ˆì´ ê°•í•˜ë‹¤.
ëª¨í—˜ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³ , ì ê·¹ì ìœ¼ë¡œ ìƒˆë¡œìš´ ê²½í—˜ì„ ì¶”êµ¬í•œë‹¤.
ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ë©°, ëŒ€ë‹´í•˜ê²Œ ë‚˜ì•„ê°„ë‹¤.
ë•Œë¡œëŠ” ì¶©ë™ì ì´ê±°ë‚˜ ì§€ë°°ì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ëŒ€ë‹´í•œ ëª¨í—˜ê°€â€™ë¡œ ë¶ˆë¦°ë‹¤.
ìž¬ë¯¸ì™€ íž˜ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ìžìœ ë¡­ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.
ê°•ë ¬í•œ ì¹´ë¦¬ìŠ¤ë§ˆê°€ ìžˆë‹¤.`,

  "8w7": `ðŸŸ¢ 8ë²ˆ ìœ í˜• (ë„ì „ìž)
8w7 (ë„ì „ìž + ì—´ì •ê°€)

ê°•ì¸í•¨ê³¼ ìžê¸°ì£¼ìž¥ì— ì™¸í–¥ì ì´ê³  ëª¨í—˜ì ì¸ ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ì—ë„ˆì§€ ë„˜ì¹˜ê³  ì¹´ë¦¬ìŠ¤ë§ˆê°€ ê°•í•˜ë‹¤.
ì‚¬ëžŒë“¤ì„ ì´ëŒê³  ì£¼ë„í•˜ëŠ” ëŠ¥ë ¥ì´ ìžˆë‹¤.
ìœ„í—˜ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³ , ëŒ€ë‹´í•˜ê²Œ í–‰ë™í•œë‹¤.
ë•Œë¡œëŠ” ê³¼ê²©í•˜ê±°ë‚˜ ì§€ë°°ì ìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ì¹´ë¦¬ìŠ¤ë§ˆ ìžˆëŠ” ë„ì „ìžâ€™ë¡œ ë¶ˆë¦°ë‹¤.
íž˜ê³¼ ìžìœ ë¥¼ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì™¸í–¥ì ì´ê³  í™œë™ì ì¸ ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.
ê°•ë ¥í•œ ë¦¬ë”ì‹­ì„ ë³´ì¸ë‹¤.`,

  "8w9": `ðŸŸ¢ 8ë²ˆ ìœ í˜• (ë„ì „ìž)
8w9 (ë„ì „ìž + í‰í™”ì£¼ì˜ìž)

ê°•ì¸í•¨ê³¼ ìžê¸°ì£¼ìž¥ì— ì°¨ë¶„í•˜ê³  í‰í™”ë¡œìš´ ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ê°•í•˜ë©´ì„œë„ ì˜¨í™”í•œ íƒœë„ë¥¼ ë³´ì¸ë‹¤.
íƒ€ì¸ì„ ë³´í˜¸í•˜ê³ , ê³µë™ì²´ì˜ í‰í™”ë¥¼ ì¤‘ì‹œí•œë‹¤.
ë¦¬ë”ì‹­ì´ ìžˆì§€ë§Œ, ê³¼ê²©í•¨ë³´ë‹¤ëŠ” ë¶€ë“œëŸ¬ìš´ íž˜ì„ ë°œíœ˜í•œë‹¤.
ë•Œë¡œëŠ” ì†Œê·¹ì ì´ê±°ë‚˜ ê°ˆë“±ì„ í”¼í•˜ë ¤ í•  ìˆ˜ ìžˆë‹¤.
â€˜ë³´í˜¸ì ì¸ ë„ì „ìžâ€™ë¡œ ë¶ˆë¦°ë‹¤.
íž˜ê³¼ ì¡°í™”ë¥¼ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì°¨ë¶„í•˜ë©´ì„œë„ ê°•ì¸í•œ ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.
ë”°ëœ»í•œ ë¦¬ë”ì‹­ì„ ë³´ì¸ë‹¤.`,

  "9w8": `ðŸŸ¢ 9ë²ˆ ìœ í˜• (í‰í™”ì£¼ì˜ìž)
9w8 (í‰í™”ì£¼ì˜ìž + ë„ì „ìž)

ì˜¨í™”í•˜ê³  í‰í™”ë¡œìš´ ì„±í–¥ì— ê°•ì¸í•¨ê³¼ ìžê¸°ì£¼ìž¥ì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ê¸°ë³¸ì ìœ¼ë¡œ ê°ˆë“±ì„ í”¼í•˜ë ¤ í•˜ì§€ë§Œ, í•„ìš”í•  ë•ŒëŠ” ë‹¨í˜¸í•˜ë‹¤.
íƒ€ì¸ì„ ë³´í˜¸í•˜ë©°, ì¤‘ìž¬ìžì˜ ì—­í• ì„ í•œë‹¤.
ì˜¨í™”í•˜ì§€ë§Œ ê°•ë ¥í•œ ì¡´ìž¬ê°ì„ ë°œíœ˜í•œë‹¤.
ë•Œë¡œëŠ” ìˆ˜ë™ì  ê³µê²©ì„±ì„ ë³´ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ê°•ì¸í•œ í‰í™”ì£¼ì˜ìžâ€™ë¡œ ë¶ˆë¦°ë‹¤.
ì¡°í™”ì™€ íž˜ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ë¶€ë“œëŸ¬ìš°ë©´ì„œë„ ë‹¨ë‹¨í•œ ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.
ê· í˜• ìž¡ížŒ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•œë‹¤.`,

  "9w1": `ðŸŸ¢ 9ë²ˆ ìœ í˜• (í‰í™”ì£¼ì˜ìž)
9w1 (í‰í™”ì£¼ì˜ìž + ê°œí˜ê°€)

ì˜¨í™”í•˜ê³  í‰í™”ë¡œìš´ ì„±í–¥ì— ì›ì¹™ì ì´ê³  ì´ìƒì£¼ì˜ì  ê¸°ì§ˆì´ ê²°í•©ëœ ëª¨ìŠµì´ë‹¤.
ê°ˆë“±ì„ í”¼í•˜ë ¤ í•˜ì§€ë§Œ, ì •ì˜ì™€ ë„ë•ì  ê¸°ì¤€ì€ ì¤‘ì‹œí•œë‹¤.
ì°¨ë¶„í•˜ê³  ì‚¬ë ¤ ê¹Šìœ¼ë©°, ì•ˆì •ê°ì„ ì¤€ë‹¤.
ì‚¬ëžŒë“¤ì„ ì¤‘ìž¬í•˜ê³ , ì˜¬ë°”ë¥¸ ê¸¸ë¡œ ì´ëŒë ¤ í•œë‹¤.
ë•Œë¡œëŠ” ìžê¸° ì£¼ìž¥ì´ ì•½í•˜ê±°ë‚˜ í˜„ì‹¤ íšŒí”¼ì ì¼ ìˆ˜ ìžˆë‹¤.
â€˜ë„ë•ì ì¸ í‰í™”ì£¼ì˜ìžâ€™ë¡œ ë¶ˆë¦°ë‹¤.
í‰í™”ì™€ ì›ì¹™ì„ ë™ì‹œì— ì¶”êµ¬í•œë‹¤.
ì˜¨í™”í•˜ë©´ì„œë„ ì´ìƒì£¼ì˜ì  ì„±ê²©ì´ íŠ¹ì§•ì´ë‹¤.
ê· í˜• ìžˆëŠ” ì¤‘ìž¬ìžë¡œì„œì˜ íž˜ì„ ë°œíœ˜í•œë‹¤.`,
};

// ìƒì„¸ ê²°ê³¼ ë©”ì‹œì§€ ì¡°ë¦½
function buildResultMessage(typeNum, wingLabel) {
  const header = `âœ¨ ê²°ê³¼: ${wingLabel} (ê¸°ë³¸ íƒ€ìž… ${typeNum})`;
  const detail = wingLongDesc[wingLabel] || "";
  return `${header}\n\n${detail}\n\n${questions.save}`;
}

// ======================
// ðŸ“Œ ì„¸ì…˜ ê´€ë¦¬
// ======================
let sessions = {};
function resetToStart(userId) {
  sessions[userId] = {
    step: "start",
    Name: null,
    answers: {},
    Basic_Type: null,
    Wing: null,
  };
  return sessions[userId];
}

// ======================
// ðŸ“Œ ì§ˆë¬¸ í…ìŠ¤íŠ¸
// ======================
const questions = {
  menu: "1ï¸âƒ£ ì§€ê¸ˆê¹Œì§€ ê²°ê³¼ ë³´ê¸°\n2ï¸âƒ£ í…ŒìŠ¤íŠ¸í•˜ê¸°\n\nì›í•˜ëŠ” ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ì„¸ìš”!",
  askName: "ì´ë¦„ì„ ìž…ë ¥í•´ì£¼ì„¸ìš” ðŸ™‚",
  Q1_1: "Q1-1. ì§‘ë‹¨ì—ì„œ ê´€ê³„ë¥¼ ë§ºì„ ë•Œ ë‚˜ëŠ”â€¦\n1. ê·œì¹™ê³¼ ì§ˆì„œë¥¼ ì¤‘ì‹œí•˜ë©° ìƒëŒ€ê°€ ê¸°ëŒ€í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ë ¤ê³  í•œë‹¤.\n2. ìžì‹ ê° ìžˆê²Œ ì£¼ë„í•˜ê³ , í•„ìš”í•œ ê²½ìš° ì†”ì§í•˜ê²Œ ì˜ê²¬ì„ ë§í•˜ë ¤ê³  í•œë‹¤.\n3. íƒ€ì¸ì˜ ê°ì •ê³¼ ë¶„ìœ„ê¸°ì— ë¯¼ê°í•˜ì—¬ ìƒí™©ì„ ì¡°ìœ¨í•˜ë ¤ê³  í•œë‹¤.",
  Q1_2: "Q1-2. ì‚¬ëžŒë“¤ê³¼ í•¨ê»˜ ìžˆì„ ë•Œ ë‚˜ëŠ”â€¦\n1. ì‹ ë¢°ì™€ ì•ˆì •ê°ì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ë©°, ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë ¤ê³  í•œë‹¤.\n2. ìžì‹ ì´ ì¤‘ì‹¬ì´ ë˜ì–´ ì¼ì„ ì´ëŒê±°ë‚˜ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì°¾ìœ¼ë ¤ í•œë‹¤.\n3. ì£¼ë³€ ì‚¬ëžŒì˜ ë§ˆìŒê³¼ í•„ìš”ë¥¼ ì½ê³  ì¡°í™”ë¥¼ ë§žì¶”ë ¤ê³  í•œë‹¤.",
  Q2_1: "Q2-1. ì¼ì´ ê³„íšëŒ€ë¡œ ë˜ì§€ ì•Šì„ ë•Œ ë‚˜ëŠ”â€¦\n1. â€œê·¸ëž˜ë„ ê´œì°®ì•„, ì´ ìƒí™©ì—ì„œë„ ë°°ìš¸ ì ì´ ìžˆì–´â€ë¼ê³  ìŠ¤ìŠ¤ë¡œë¥¼ ë‹¤ë…í•˜ë©° ë§ˆìŒì„ íŽ¸í•˜ê²Œ í•œë‹¤.\n2. â€œë¬¸ì œë¥¼ ì°¨ê·¼ì°¨ê·¼ í•´ê²°í•´ì•¼ í•´â€ë¼ë©° ê°ì •ì„ ìž ì‹œ ì–µëˆ„ë¥´ê³  ê³„íšì„ ì„¸ìš´ë‹¤.\n3. â€œì™œ ì´ë ‡ê²Œ ì¼ì´ ê¼¬ì´ì§€?â€ë¼ë©° ìˆœê°„ì ìœ¼ë¡œ ë‹µë‹µí•¨, í™”, ë¶ˆì•ˆ ë“±ì„ ê¹Šì´ ëŠë¼ê³  ë§ˆìŒì†ìœ¼ë¡œ ê³±ì”¹ëŠ”ë‹¤.",

  save: "ê²°ê³¼ë¥¼ ì €ìž¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n1) ì €ìž¥í•˜ê¸°\n2) ì €ìž¥ ì•ˆ í•˜ê¸°",
};// Q3 ì§ˆë¬¸ & ì„ íƒì§€
const Q3 = {
  question: "Q3. ì•„ëž˜ ìƒí™©ì—ì„œ ë‚˜ì˜ ëª¨ìŠµê³¼ ê°€ìž¥ ê°€ê¹Œìš´ ì„ íƒì§€ë¥¼ ìˆœì„œëŒ€ë¡œ 3ê°œ ê³ ë¥´ì„¸ìš”.\n(ì˜ˆ: 1 5 9)",
  options: [
    "1ï¸âƒ£\nì™„ë²½ì„ ì¶”êµ¬í•˜ê³  ì˜³ê³  ê·¸ë¦„ì— ë¯¼ê°í•œ íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ë‚´ì  ë¶ˆì•ˆê³¼ ìžê¸° ë¹„íŒì´ ê°•í•´ì§€ê³  ê°ì •ì´ ê²©í™”í•©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” í™œê¸°ì°¨ê³  ì¦ê±°ì›€ì„ ì¶”êµ¬í•˜ë©° ìœµí†µì„±ì„ ë°œíœ˜í•©ë‹ˆë‹¤.",
    "2ï¸âƒ£\níƒ€ì¸ì„ ë•ê³  ì¸ì •ë°›ê¸°ë¥¼ ì¤‘ì‹œí•˜ë©° ê´€ê³„ ì¤‘ì‹¬ì ì¸ íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” í†µì œì ì´ê³  ê³µê²©ì ì´ë©° ê³¼ë„í•œ í–‰ë™ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ê°ì •ì„ ì´í•´í•˜ë©° ê´€ê³„ë¥¼ ì„¸ì‹¬í•˜ê²Œ ì‚´í•‰ë‹ˆë‹¤.",
    "3ï¸âƒ£\nëª©í‘œ ì§€í–¥ì ì´ê³  íš¨ìœ¨ì„±ì„ ì¤‘ì‹œí•˜ëŠ” íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ê°ˆë“±ì„ íšŒí”¼í•˜ê³  ìš°ìœ ë¶€ë‹¨í•˜ë©° ì¡°í™”ë¥¼ ì§€ë‚˜ì¹˜ê²Œ ì¶”êµ¬í•©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ê³„íšì ì´ê³  ì‹ ì¤‘í•˜ë©° íŒ€ê³¼ í˜‘ë ¥í•˜ë ¤ëŠ” ëª¨ìŠµì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.",
    "4ï¸âƒ£\nê°ì •ê³¼ ê°œì„±ì„ ì¤‘ìš”ì‹œí•˜ë©° ë…ì°½ì ì¸ íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ê°ì •ì— ëª°ìž…í•˜ê³  ìžê¸° í‘œí˜„ì´ ê³¼ë„í•´ì§‘ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ì§ˆì„œ ìžˆê²Œ í–‰ë™í•˜ê³  ë‚´ì  ê·œë²”ì„ ì§€í‚¤ë©° ì°½ì˜ì„±ì„ ë°œíœ˜í•©ë‹ˆë‹¤.",
    "5ï¸âƒ£\në¶„ì„ì ì´ê³  ì •ë³´ ìˆ˜ì§‘ì„ ì¤‘ì‹œí•˜ë©° ì§€ì  í˜¸ê¸°ì‹¬ì´ ê°•í•œ íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” íšŒí”¼ì ì´ê³  ê³ ë¦½ë˜ë©° ê´€ì°°ì— ì¹˜ì¤‘í•©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ê³„íšì ì´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë¬¸ì œë¥¼ ë¶„ì„í•©ë‹ˆë‹¤.",
    "6ï¸âƒ£\nì¶©ì„±ì‹¬ì´ ê°•í•˜ê³  ì‹ ë¢°ì™€ ì•ˆì „ì„ ì¤‘ì‹œí•˜ëŠ” íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ê³¼ë„í•˜ê²Œ ë¶ˆì•ˆí•´í•˜ë©° ì˜ì‹¬ê³¼ ê±±ì •ì´ ì»¤ì§€ê³ , ë°˜ë³µì ìœ¼ë¡œ í™•ì¸í•˜ê±°ë‚˜ ì•ˆì „ì„ ì ê²€í•˜ë ¤ëŠ” í–‰ë™ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” í‰í™”ë¡­ê³  ì¡°í™”ë¡­ê²Œ ìƒí™©ì„ ì¡°ìœ¨í•©ë‹ˆë‹¤.",
    "7ï¸âƒ£\ní™œê¸°ì°¨ê³  ë‚™ì²œì ì´ë©° ìƒˆë¡œìš´ ê²½í—˜ê³¼ ê°€ëŠ¥ì„±ì„ ì¶”êµ¬í•˜ëŠ” íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ì¶©ë™ì ì´ê³  ì‚°ë§Œí•˜ë©° ê³„íšì„ ë¬´ì‹œí•˜ëŠ” ê²½í–¥ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ì°¨ë¶„í•˜ê²Œ ë¶„ì„í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.",
    "8ï¸âƒ£\nê°•ë ¥í•œ í†µì œë ¥ê³¼ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ë©° ì£¼ë„ì ì¸ íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ì§€ë‚˜ì¹˜ê²Œ ê³ ë¦½ë˜ê³  ê³¼ë„í•˜ê²Œ ë¶„ì„ì ìœ¼ë¡œ í–‰ë™í•©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ë‹¨í˜¸í•˜ê²Œ í–‰ë™í•˜ë©´ì„œë„ íƒ€ì¸ì„ ë•ê³  ê´€ê³„ë¥¼ ì¡°ìœ¨í•©ë‹ˆë‹¤.",
    "9ï¸âƒ£\ní‰í™”ë¡­ê³  ì˜¨í™”í•˜ë©° ì¡°í™”ë¥¼ ì¤‘ì‹œí•˜ê³  ìƒí™©ì„ ìˆ˜ìš©í•˜ëŠ” íŠ¹ì§•ì˜ ì‚¬ëžŒìž…ë‹ˆë‹¤.\nìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” ê°ˆë“±ì´ë‚˜ ìš”êµ¬ ì•žì—ì„œ ê³¼ë„í•˜ê²Œ ì†Œê·¹ì ì´ê³  íšŒí”¼í•˜ë©°, ìžì‹ ì˜ ì˜ê²¬ì„ ë‚´ì§€ ëª»í•˜ëŠ” ëª¨ìŠµì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\nì•ˆì •ì ì¼ ë•ŒëŠ” ëª©í‘œ ë‹¬ì„± ì˜ì‹ê³¼ íš¨ìœ¨ì  í–‰ë™ì„ ë³´ìž…ë‹ˆë‹¤."
  ]
};

// ======================
// ðŸ“Œ ë©”ì‹œì§€ ì²˜ë¦¬
// ======================
app.post("/message", (req, res) => {
  const userId = req.body.userId || "default";
  const msg = (req.body.message || "").toString().trim();

  if (!isCSVReady) {
    return res.json({ reply: "â³ CSV ë¡œë“œ ì¤‘ìž…ë‹ˆë‹¤. ìž ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n\n" + questions.menu });
  }

  if (!sessions[userId]) resetToStart(userId);
  let session = sessions[userId];

  if (msg.includes("í…ŒìŠ¤íŠ¸")) {
    resetToStart(userId);
    return res.json({ reply: questions.menu });
  }

  if (session.step === "start") {
    if (msg === "1") {
      db.all("SELECT name, basic_type, wing FROM results", [], (err, rows) => {
        if (err) return res.json({ reply: "âŒ DB ì¡°íšŒ ì˜¤ë¥˜" });
        if (rows.length === 0) return res.json({ reply: "ì•„ì§ ì €ìž¥ëœ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.\n\n" + questions.menu });
        const lines = rows.map((r) => `${r.name}: ${r.wing} (ê¸°ë³¸ íƒ€ìž… ${r.basic_type})`).join("\n");
        return res.json({ reply: "ðŸ“Š ì§€ê¸ˆê¹Œì§€ ê²°ê³¼:\n" + lines + "\n\n" + questions.menu });
      });
      return;
    } else if (msg === "2") {
      session.step = "askName";
      return res.json({ reply: questions.askName });
    } else {
      return res.json({ reply: questions.menu });
    }
  }

  if (session.step === "askName") {
    session.Name = msg;
    session.step = "Q1_1";
    return res.json({ reply: questions.Q1_1 });
  }

  if (session.step === "Q1_1") {
    session.answers.Q1_1 = normalize13(msg);
    session.step = "Q1_2";
    return res.json({ reply: questions.Q1_2 });
  }

  if (session.step === "Q1_2") {
    session.answers.Q1_2 = normalize13(msg);
    session.step = "Q2_1";
    return res.json({ reply: questions.Q2_1 });
  }

  if (session.step === "Q2_1") {
    session.answers.Q2_1 = normalize13(msg);
    session.step = "Q3";
    return res.json({ reply: Q3.question + "\n\n" + Q3.options.join("\n\n") });
  }

  if (session.step === "Q3") {
    const picks = msg.match(/[1-9]/g);
    if (!picks || picks.length < 3) {
      return res.json({
  reply:
    "3ê°œ ìˆ«ìžë¥¼ ìˆœì„œëŒ€ë¡œ ìž…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: 1 5 9)\n\n" +
    Q3.question + "\n\n" + Q3.options.join("\n\n")
});
    }
    const q3 = picks.slice(0, 3).join("-");
    session.answers.Q3 = q3;

    const key = keyOf(session.answers.Q1_1, session.answers.Q1_2, session.answers.Q2_1, q3);
    const found = indexMap.get(key);

    if (!found || found.length === 0) {
      return res.json({ reply: "âŒ ì¡°í•©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n\n" + questions.menu });
    }

    // ì—¬ëŸ¬ í–‰ì´ ìžˆì–´ë„ ì²« ë²ˆì§¸ë§Œ ì‚¬ìš©
    session.Basic_Type = found[0].type;
    session.step = "Wing";
    return res.json({ reply: buildWingQuestion(session.Basic_Type) });
  }

  if (session.step === "Wing") {
    if (msg === "1") {
      session.Wing = wingDesc[Number(session.Basic_Type)].leftLabel;
    } else if (msg === "2") {
      session.Wing = wingDesc[Number(session.Basic_Type)].rightLabel;
    } else {
      return res.json({ reply: "1 ë˜ëŠ” 2ë¡œ ì„ íƒí•´ì£¼ì„¸ìš”.\n" + buildWingQuestion(session.Basic_Type) });
    }
    session.step = "save";

    // ìƒì„¸ ì„¤ëª…ê¹Œì§€ ë¶™ì—¬ì„œ ê²°ê³¼ ì¶œë ¥
    return res.json({ reply: buildResultMessage(session.Basic_Type, session.Wing) });
  }

  if (session.step === "save") {
    if (msg === "1") {
      db.run(
        "INSERT INTO results (userId, name, basic_type, wing) VALUES (?, ?, ?, ?)",
        [userId, session.Name, session.Basic_Type, session.Wing],
        (err) => {
          if (err) {
            console.error("âŒ DB ì €ìž¥ ì˜¤ë¥˜:", err.message);
            return res.json({ reply: "âŒ DB ì €ìž¥ ì˜¤ë¥˜" });
          }
          resetToStart(userId);
          return res.json({ reply: "âœ… ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n" + questions.menu });
        }
      );
      return;
    } else if (msg === "2") {
      resetToStart(userId);
      return res.json({ reply: "ì €ìž¥ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤.\n\n" + questions.menu });
    } else {
      return res.json({ reply: questions.save });
    }
  }

  // ê·¸ ì™¸
  return res.json({ reply: questions.menu });
});

// ======================
// ðŸ“Œ ë‚ ê°œ ì„ íƒ ì§ˆë¬¸ ì¶œë ¥
// ======================
function buildWingQuestion(typeNum) {
  const wing = wingDesc[typeNum];
  if (!wing) return "âŒ ìž˜ëª»ëœ íƒ€ìž…ìž…ë‹ˆë‹¤.";

  return `ë‹¹ì‹ ì˜ ê¸°ë³¸ ìœ í˜•ì€ ${typeNum}ë²ˆìž…ë‹ˆë‹¤.\n\në‚ ê°œë¥¼ ì„ íƒí•˜ì„¸ìš”:\n1) ${wing.leftLabel}\n   - ${wing.left.join("\n   - ")}\n\n2) ${wing.rightLabel}\n   - ${wing.right.join("\n   - ")}`;
}

// ======================
// ðŸ“Œ ì„œë²„ ì‹¤í–‰
// ======================
app.listen(PORT, () => {
  app.listen(PORT, () => {
  console.log(`âœ… Server running on port ${PORT}`);
});
});  